# Project Structure

Complete overview of the repository organization.

```
protein-structure-graphs/
│
├── README.md                      # Main documentation
├── QUICK_START.md                 # 5-minute getting started guide
├── CONTRIBUTING.md                # Contribution guidelines
├── CHANGELOG.md                   # Version history
├── LICENSE                        # MIT License
├── requirements.txt               # Python dependencies
├── setup.py                       # Package installation config
├── Makefile                       # Common development tasks
├── .gitignore                     # Git ignore rules
│
├── protein_graph_builder.ipynb    # Main Jupyter notebook (CORE TOOL)
│
├── data/                          # Data directory
│   ├── README.md                  # Data directory documentation
│   ├── pdb_files/                 # Input PDB files (user-provided)
│   └── graphs/                    # Output graphs (auto-generated)
│       ├── graphs_monomer/        # Single-chain graphs
│       ├── graphs_complex/        # Multi-chain graphs
│       ├── dataset_summary_monomer.csv
│       ├── dataset_summary_complex.csv
│       ├── failed_structures.txt
│       └── graph_definition.json
│
└── examples/                      # Example scripts
    └── load_graphs.py             # How to load and use graphs
```

## Core Files

### Main Tool
- **`protein_graph_builder.ipynb`**: The primary Jupyter notebook containing the complete graph generation pipeline

### Configuration
- **`requirements.txt`**: All Python package dependencies with versions
- **`setup.py`**: Optional package installation configuration
- **`.gitignore`**: Files and directories to exclude from version control

## Documentation Files

### User Documentation
- **`README.md`**: Comprehensive overview, installation, usage instructions
- **`QUICK_START.md`**: Minimal quick start guide (5 minutes)
- **`data/README.md`**: Data directory structure and management

### Developer Documentation
- **`CONTRIBUTING.md`**: How to contribute to the project
- **`CHANGELOG.md`**: Version history and release notes
- **`PROJECT_STRUCTURE.md`**: This file - repository organization

### Legal
- **`LICENSE`**: MIT License terms

## Development Tools

### Build Tools
- **`Makefile`**: Automates common tasks:
  - `make install`: Install dependencies
  - `make notebook`: Launch Jupyter
  - `make download-example`: Get example PDB files
  - `make clean`: Remove generated files

### Example Code
- **`examples/load_graphs.py`**: Demonstrates:
  - Loading individual graphs
  - Creating datasets
  - Accessing features
  - Computing statistics

## Data Organization

### Input Data (`data/pdb_files/`)
User places PDB files here. These are NOT tracked in git by default.

**Example:**
```
data/pdb_files/
├── 1ABC.pdb
├── 2XYZ.pdb
└── protein_complex.pdb
```

### Output Data (`data/graphs/`)
Generated by running the notebook. Structure is auto-created.

**Monomer Graphs:**
```
data/graphs/graphs_monomer/
├── 1ABC_A.pt        # Chain A graph
├── 1ABC_B.pt        # Chain B graph
└── 2XYZ_A.pt
```

**Complex Graphs:**
```
data/graphs/graphs_complex/
├── 1ABC_complex.pt  # All chains combined
└── 2XYZ_complex.pt
```

**Metadata:**
```
data/graphs/
├── dataset_summary_monomer.csv    # Monomer statistics
├── dataset_summary_complex.csv    # Complex statistics
├── failed_structures.txt          # Processing errors
└── graph_definition.json          # Reproducibility metadata
```

## Notebook Structure

The main notebook (`protein_graph_builder.ipynb`) is organized into 14 sections:

1. **Tool Description** - Overview and scientific specification
2. **Installation & Imports** - Package imports
3. **Version & Reproducibility** - Random seeds
4. **User Configuration** - Editable parameters (ONLY SECTION USERS EDIT)
5. **Amino Acid Encoding** - Standard AA tables
6. **PDB Parsing** - BioPython utilities
7. **Feature Builder** - Node feature construction
8. **Distance Computation** - Euclidean distance matrix
9. **Edge Builder** - Cutoff-based edge generation
10. **Graph Builder** - Main graph construction
11. **Monomer Pipeline** - Single-chain processing
12. **Complex Pipeline** - Multi-chain processing
13. **Saving & Logging** - Output file generation
14. **Graph Definition** - Scientific transparency metadata

## File Formats

### Input Formats
- **PDB** (`.pdb`): Standard Protein Data Bank format

### Output Formats
- **PyTorch Tensors** (`.pt`): Serialized PyG Data objects
- **CSV** (`.csv`): Dataset summaries and statistics
- **JSON** (`.json`): Graph specifications and metadata
- **Text** (`.txt`): Error logs

## Design Principles

### 1. Modularity
- Each function has a single, clear purpose
- Functions are reusable and testable
- Clear separation of concerns

### 2. Reproducibility
- All parameters documented in `graph_definition.json`
- Random seeds set for deterministic behavior
- Version information tracked

### 3. User-Friendliness
- Single configuration cell for all parameters
- Clear progress bars and logging
- Comprehensive error messages

### 4. Scientific Rigor
- Accurate distance calculations
- Validated graph construction
- Complete feature documentation

### 5. Production Quality
- Type hints throughout
- Docstrings for all functions
- Defensive error handling
- No hardcoded paths

## Extension Points

### Easy to Add
- Additional node features (secondary structure, SASA, etc.)
- Different edge definitions (contact maps, k-nearest neighbors)
- Alternative output formats (NetworkX, DGL)
- Visualization functions

### Requires Core Changes
- Non-residue-level graphs (atom-level, domain-level)
- Different graph topologies (directed graphs, hypergraphs)
- Protein language model embeddings (out of scope by design)

## Version Control Strategy

### Tracked Files
- All Python code
- Jupyter notebook
- Documentation (`.md` files)
- Configuration files
- Example scripts

### NOT Tracked (in `.gitignore`)
- Generated graphs (`.pt` files)
- Large PDB files
- Python cache (`__pycache__`)
- Jupyter checkpoints
- Virtual environments

### Optional Tracking
Users can choose to track:
- Small example PDB files
- `graph_definition.json` for reproducibility
- Dataset summary CSVs

## Deployment Options

### Option 1: Direct Use (Recommended)
```bash
git clone repo
pip install -r requirements.txt
jupyter notebook
```

### Option 2: Package Installation
```bash
git clone repo
pip install -e .
# Import functions in other projects
```

### Option 3: Docker (User-Created)
```dockerfile
FROM python:3.9
COPY requirements.txt .
RUN pip install -r requirements.txt
COPY . /app
WORKDIR /app
CMD ["jupyter", "notebook", "--ip=0.0.0.0"]
```

## Testing Strategy

### Current State
- Manual testing via notebook execution
- Example script validation

### Future Enhancements
- Unit tests for parsing functions
- Integration tests for pipeline
- Validation against known structures
- Performance benchmarks

## Maintenance

### Regular Updates
- Dependency version bumps
- Bug fixes
- Documentation improvements

### Major Releases
- New graph representations
- Performance optimizations
- Breaking changes (with migration guide)

---

This structure prioritizes:
✓ Ease of use
✓ Scientific accuracy
✓ Reproducibility
✓ Maintainability
✓ Extensibility
